{% extends "base/base.j2" %}
{% block content %}
<!-- 四角い枠を作る -->
<div class="mt-3 shadow-lg rounded mx-1" style="border: 1px double #222222;">
    <div class="row">
        <!-- 店の説明文 -->
        <div class="col-md-6 container">
            <div class="row mx-2 my-4 ">
                <h2>[[shop.name]]</h2>
                <!-- なんか出ない... -->
                <hr style="border:0;border-top:1px solid #FF0000;">
            </div>
            <div class="row mx-2 my-2 ">
                <p class="lead">[[shop.detail]]</p>
            </div>
        </div>
        <!-- 推しのメニュー(スライドショー) -->
        <div class="col-md-6 my-auto">
            <div class="mx-3 my-3">
                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                  <ol class="carousel-indicators">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                  </ol>
                  <div class="carousel-inner rounded">
                    <div class="carousel-item active">
                      <img class="d-block w-100" v-bind:src="'api/img'+location.search+'&num=1'" alt="First slide">
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" v-bind:src="'api/img'+location.search+'&num=2'" alt="Second slide">
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" v-bind:src="'api/img'+location.search+'&num=3'" alt="Third slide">
                    </div>
                  </div>
                  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
                </div>
            </div>
        </div>
        <!-- 地図 -->
        <div class="col-md-6 my-auto">
            <div class="mx-3 my-3">
                <div class="embed-responsive embed-responsive-21by9">
                    <iframe v-bind:src="'http://maps.google.co.jp/maps?q='+shop.gps1+','+shop.gps2+'&output=embed'" width="700" height="700" frameborder="0" style="border:0" allowfullscreen></iframe>
                </div>
            </div>
        </div>
        <!-- 雑多情報 -->
        <div class="col-md-6 container my-auto">
            <!-- 営業日 -->
            <div class="row mx-3 my-3">
                <table class="table table-sm table-bordered">
                  <thead class="thead-light">
                    <tr class="text-center">
                      <th scope="col" glot-model="mon">月</th>
                      <th scope="col" glot-model="tue">火</th>
                      <th scope="col" glot-model="wed">水</th>
                      <th scope="col" glot-model="thu">木</th>
                      <th scope="col" glot-model="fri">金</th>
                      <th scope="col" glot-model="sat">土</th>
                      <th scope="col" glot-model="sun">日</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="text-center">
                      <td>[[shop.mon]]</td>
                      <td>[[shop.tue]]</td>
                      <td>[[shop.wed]]</td>
                      <td>[[shop.thu]]</td>
                      <td>[[shop.fri]]</td>
                      <td>[[shop.sat]]</td>
                      <td>[[shop.sun]]</td>
                    </tr>
                  </tbody>
                </table>
            </div>
            <!-- 営業時間 -->
            <div class="row mx-3 my-3">
                <div class="mx-auto">
                    <h3>営業時間: [[shop.time]]</h3>
                    <h3>[[shop.time_detail]]</h3>
                </div>
            </div>
            <!-- 連絡先 -->
            <div class="row mx-3 my-3">
                <div class="mx-auto">
                    <h3>[[shop.tel]]</h3>
                </div>
            </div>
            <!-- 各種ボタン -->
            <div class="d-flex align-items-center flex-column">
                <div class="d-flex justify-content-center my-1">
                    <div class="d-flex justify-content-center">
                        <!-- モダール用ボタン -->
                        <button type="button" class="btn btn-outline-primary mx-1" data-toggle="modal" data-target="#Menu">Menu</button>
                        <!-- モーダル部分始まり -->
                        <div class="modal fade" id="Menu" tabindex="-1" role="dialog" aria-labelledby="MenuLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="MenuLabel">Menu</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="container-fluid">
                                            <div class="mt-1 row">
                                                <div class="col-md-8 mr-auto">
                                                    <h2>メニュー名</h2>
                                                    <h4>価格</h4>
                                                    <h4>説明</h4>
                                                </div>
                                                <div class="col-md-4 ml-auto">
                                                    <img style="display: block;height: auto; max-width: 100%;" src="https://via.placeholder.com/500">
                                                </div>
                                            </div>
                                            <div class="mt-1 row">
                                                <div class="col-md-8 mr-auto">
                                                    <h2>メニュー名</h2>
                                                    <h4>価格</h4>
                                                    <h4>説明</h4>
                                                </div>
                                                <div class="col-md-4 ml-auto">
                                                    <img style="display: block;height: auto; max-width: 100%;" src="https://via.placeholder.com/500">
                                                </div>
                                            </div>
                                            <div class="mt-1 row">
                                                <div class="col-md-8 mr-auto">
                                                    <h2>メニュー名</h2>
                                                    <h4>価格</h4>
                                                    <h4>説明</h4>
                                                </div>
                                                <div class="col-md-4 ml-auto">
                                                    <img style="display: block;height: auto; max-width: 100%;" src="https://via.placeholder.com/500">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" glot-model="close" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- モーダル部分終わり -->
                        <!-- モダール用ボタン -->
                        <button type="button" class="btn btn-outline-primary mx-1" data-toggle="modal" data-target="#Review">Review</button>
                        <!-- モーダル部分始まり -->
                        <div class="modal fade" id="Review" tabindex="-1" role="dialog" aria-labelledby="CategotyLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="ReviewLabel">Review</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="container-fluid">
                                            <div class="mt-3 row">
                                                <div class="col-md-6 mx-auto"><h3>レビュアー名</h3></div>
                                                <div class="col-md-6 mx-auto my-auto"><h3>★★★★★</h3></div>
                                                <h5 class="mx-auto">ああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああ</h5>
                                            </div>
                                            <div class="mt-3 row">
                                                <div class="col-md-6 mx-auto"><h3>レビュアー名</h3></div>
                                                <div class="col-md-6 mx-auto my-auto"><h3>★★★★★</h3></div>
                                                <h4 class="mx-auto">説明</h4>
                                            </div>
                                            <div class="mt-3 row">
                                                <div class="col-md-6 mx-auto"><h3>レビュアー名</h3></div>
                                                <div class="col-md-6 mx-auto my-auto"><h3>★★★★★</h3></div>
                                                <h4 class="mx-auto">説明</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <!-- モダール用ボタン -->
                                        <button type="button" class="btn btn-outline-primary mx-1" onclick="createReview()">レビューを投稿する</button>
                                        <button type="button" class="btn btn-secondary" glot-model="close" data-dismiss="modal">閉じる</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- モーダル部分終わり -->
                        <!-- モーダル部分始まり -->
                        <div class="modal fade" id="CReview" tabindex="-1" role="dialog" aria-labelledby="CategotyLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="CReviewLabel">レビュー作成</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <form method="post" action="/api/review">
                                    <div class="modal-body">
                                        <div class="form-group">
                                            <label for="reviewStarCount">付ける星の数</label>
                                            <select class="form-control" id="reviewStarCount">
                                              <option>5</option>
                                              <option>4</option>
                                              <option>3</option>
                                              <option>2</option>
                                              <option>1</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="reviewTitle">レビュータイトル</label>
                                            <input type="text" class="form-control" id="reviewTitle" placeholder="美味しかったです">
                                        </div>
                                        <div class="form-group">
                                            <label for="reviewContent">レビュー内容</label>
                                            <textarea class="form-control" id="exampleFormControlTextarea1" rows="6"></textarea>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-primary">投稿する</button>
                                        <button type="button" class="btn btn-secondary" glot-model="close" data-dismiss="modal">閉じる</button>
                                    </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!-- モーダル部分終わり -->
                    </div>
                    
                </div>
                <div class="d-flex justify-content-center mb-3">
                    <a v-bind:href="'api/pdf'+location.search+'&pdf_type=1'" v-bind:download="shop.name+'_page.pdf'" class="btn btn-primary mx-1" glot-model="save-page-pdf">ページPDFを保存</a>
                    <a v-bind:href="'api/pdf'+location.search+'&pdf_type=2'" v-bind:download="shop.name+'_menu.pdf'" class="btn btn-primary mx-1" glot-model="save-menu-pdf">メニューPDFを保存</a>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
function createReview(){
  $('body').removeClass('modal-open'); // 1
  $('.modal-backdrop').remove();       // 2
  $('#Review').modal('hide');        // 3
  $('#CReview').modal('show')
  $('#CReview').modal('handleUpdate')
}

function sendReview(){
}
</script>
{% endblock %}